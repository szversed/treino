<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treino Masculino</title>
    <style>
        :root {
            --beige-900: #f5f5dc;
            --beige-800: #e6e6c4;
            --beige-700: #d7d7ac;
            --black: #1a1a1a;
            --black-light: #4a4a4a;
            --white: #ffffff;
            --gray-300: #b0b0b0;
            --gray-200: #d1d5db;
            --green: #28a745;
            --red: #dc3545;
            --blue: #007bff;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, sans-serif;
            user-select: none;
        }
        body {
            min-height: 100vh;
            background: linear-gradient(to bottom right, var(--beige-900), var(--beige-800));
            color: var(--black);
            overflow-x: hidden;
        }
        header {
            background: var(--beige-700);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .header-content {
            max-width: 80rem;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--black);
            font-size: 1.75rem;
            font-weight: 700;
        }
        .reset-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: 1px solid var(--red);
            border-radius: 9999px;
            background: var(--red);
            color: var(--white);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: transform 0.2s, background 0.2s;
        }
        .reset-button:hover {
            background: #c82333;
            transform: scale(1.05);
        }
        main {
            max-width: 80rem;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        .workout-tabs {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        .workout-tab {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 9999px;
            background: var(--beige-800);
            color: var(--black-light);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            white-space: nowrap;
            transition: all 0.3s ease;
        }
        .workout-tab:hover {
            background: var(--beige-700);
            transform: scale(1.05);
        }
        .workout-tab.active {
            background: var(--black);
            color: var(--white);
            transform: scale(1.05);
        }
        .progress-bar {
            margin-bottom: 2rem;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.75rem;
        }
        .progress-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--black);
        }
        .progress-track {
            flex: 1;
            height: 0.75rem;
            background: var(--gray-200);
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--green);
            transition: width 0.5s ease;
        }
        .progress-percent {
            font-size: 1rem;
            font-weight: 600;
            color: var(--black);
        }
        .exercise-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .exercise-card {
            background: var(--white);
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .exercise-card.initial {
            opacity: 0;
            animation: slideIn 0.5s ease forwards;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .exercise-card.active {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-left: 4px solid var(--green);
        }
        .exercise-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--black);
            margin-bottom: 1rem;
        }
        .config-container {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            align-items: center;
        }
        .config-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--black-light);
        }
        .sets-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .set-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem;
            background: var(--beige-900);
            border-radius: 0.5rem;
        }
        .set-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--black);
            width: 4rem;
        }
        .weight-input, .time-input, .sets-input, .reps-input {
            width: 5rem;
            padding: 0.5rem;
            border: 1px solid var(--gray-200);
            border-radius: 0.25rem;
            background: var(--white);
            color: var(--black);
            font-size: 0.875rem;
            transition: border-color 0.2s;
        }
        .weight-input:focus, .time-input:focus, .sets-input:focus, .reps-input:focus {
            border-color: var(--blue);
            outline: none;
        }
        .reps-info, .rest-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--black);
            padding: 0.5rem 0.75rem;
            border-radius: 0.25rem;
            background: var(--beige-800);
        }
        .complete-button {
            width: 2.5rem;
            height: 2.5rem;
            border: none;
            border-radius: 0.5rem;
            background: var(--gray-200);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        .complete-button:hover {
            background: var(--blue);
        }
        .complete-button.completed {
            background: var(--green);
        }
        .complete-button svg {
            width: 1.25rem;
            height: 1.25rem;
            stroke: var(--black);
        }
        .complete-button.completed svg {
            stroke: var(--white);
        }
        .timer {
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--black);
            font-size: 1rem;
            font-weight: 600;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        .pause-button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--black);
            border-radius: 9999px;
            background: var(--white);
            color: var(--black);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .pause-button:hover {
            background: var(--blue);
            color: var(--white);
            border-color: var(--blue);
        }
        @media (max-width: 640px) {
            .set-row {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            .config-container {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6.7 6.7a8 8 0 1 1 10.6 10.6"/>
                    <path d="M8.9 8.9a5 5 0 1 1 6.2 6.2"/>
                    <path d="M11.1 11.1a2 2 0 1 1 1.8 1.8"/>
                </svg>
                Treino Masculino
            </div>
            <button class="reset-button" onclick="resetWorkout()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                    <path d="M3 3v5h5"/>
                </svg>
                Resetar
            </button>
        </div>
    </header>
    <main>
        <div class="workout-tabs" id="workoutTabs"></div>
        <div class="progress-bar">
            <div class="progress-header">
                <h2 class="progress-title">Progresso</h2>
                <div class="progress-track">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-percent" id="progressPercent">0%</span>
            </div>
        </div>
        <div class="exercise-list" id="exerciseList"></div>
    </main>

    <script>
        const workouts = [
            {
                day: 'Segunda-feira',
                name: 'Peito e Tríceps',
                exercises: [
                    { name: 'Flexões', sets: 1, reps: 'Até a falha', rest: 35 },
                    { name: 'Supino reto com barra', sets: 3, reps: 8, rest: 60, weight: 13 },
                    { name: 'Supino inclinado com halteres', sets: 3, reps: 8, rest: 60, weight: 12 },
                    { name: 'Crucifixo na máquina', sets: 3, reps: 8, rest: 60, weight: 30 },
                    { name: 'Tríceps Carter', sets: 3, reps: 12, rest: 45, weight: 10 }, // Revertido
                    { name: 'Tríceps francês com barra', sets: 3, reps: 8, rest: 60, weight: 20 }
                ]
            },
            {
                day: 'Terça-feira',
                name: 'Ombro e Costas',
                exercises: [
                    { name: 'Puxada alta', sets: 3, reps: 8, rest: 60, weight: 40 },
                    { name: 'Remada baixa', sets: 3, reps: 8, rest: 60, weight: 35 },
                    { name: 'Remada unilateral na polia', sets: 3, reps: 8, rest: 60, weight: 30 }, // Ajustado pra polia
                    { name: 'Remada alta no cabinho', sets: 3, reps: 8, rest: 60, weight: 35 }, // Revertido
                    { name: 'Elevação lateral na polia', sets: 3, reps: 8, rest: 60, weight: 5 },
                    { name: 'Elevação frontal na polia', sets: 3, reps: 8, rest: 60, weight: 15 }
                ]
            },
            {
                day: 'Quarta-feira',
                name: 'Perna',
                exercises: [
                    { name: 'Prancha', sets: 3, reps: '60 segundos', rest: 30 },
                    { name: 'Panturrilha em pé', sets: 4, reps: 30, rest: 35 },
                    { name: 'Agachamento Smith', sets: 3, reps: 8, rest: 60 }, // Revertido
                    { name: 'Leg press', sets: 3, reps: 8, rest: 60, weight: 50 },
                    { name: 'Hack squat', sets: 4, reps: 12, rest: 60, weight: 30 },
                    { name: 'Cadeira extensora', sets: 3, reps: 8, rest: 60, weight: 20 },
                    { name: 'Cadeira flexora', sets: 3, reps: 8, rest: 60, weight: 20 }, // Revertido (era "Mesa flexora" no original, ajustado pra "Cadeira flexora" como pedido)
                    { name: 'Cadeira flexora', sets: 1, reps: 'Até a falha', rest: 60 } // Revertido de "Stiff" pra "Cadeira flexora" (corrigido de "Flexão cadeira extensora")
                ]
            },
            {
                day: 'Quinta-feira',
                name: 'Braço e Trapézio',
                exercises: [
                    { name: 'Rosca Scott com barra W', sets: 3, reps: 8, rest: 90, weight: 16 },
                    { name: 'Rosca martelo na polia com corda', sets: 3, reps: 8, rest: 60, weight: 20 },
                    { name: 'Rosca inclinado com halteres', sets: 3, reps: 8, rest: 60, weight: 8 },
                    { name: 'Crucifixo inverso na polia', sets: 3, reps: 8, rest: 60, weight: 25 },
                    { name: 'Encolhimento de ombros com halteres', sets: 3, reps: 12, rest: 60, weight: 15 }
                ]
            },
            {
                day: 'Sexta-feira',
                name: 'Antebraço e Abdômen',
                exercises: [
                    { name: 'Prancha', sets: 3, reps: '60 segundos', rest: 30, adjustableTime: true },
                    { name: 'Abdominal na barra', sets: 4, reps: 15, rest: 30 },
                    { name: 'Abdominal infra', sets: 4, reps: 50, rest: 30 },
                    { name: 'Flexão de punho', sets: 3, reps: 12, rest: 30, weight: 10 },
                    { name: 'Extensão de punho', sets: 3, reps: 8, rest: 30, weight: 4 },
                    { name: 'Rosca inversa', sets: 3, reps: 8, rest: 30, weight: 8 },
                    { name: 'Rosca de punho na polia', sets: 2, reps: 10, rest: 30, weight: 15 }
                ]
            }
        ];

        let currentWorkout = 0;
        let currentExercise = 0;
        let workoutData = JSON.parse(localStorage.getItem('workoutData') || '{}');
        let timerInterval = null;
        let isTimerPaused = false;
        let timeLeft = 0;
        let activeTimerExercise = null;
        let isInitialRender = true;

        function initializeWorkoutData() {
            workouts.forEach((workout, workoutIndex) => {
                if (!workoutData[workoutIndex]) {
                    workoutData[workoutIndex] = {};
                }
                workout.exercises.forEach((exercise, exerciseIndex) => {
                    if (!workoutData[workoutIndex][exerciseIndex]) {
                        workoutData[workoutIndex][exerciseIndex] = {
                            sets: exercise.sets,
                            reps: exercise.reps,
                            weights: Array(exercise.sets).fill(exercise.weight || ''),
                            completed: Array(exercise.sets).fill(false),
                            timer: false,
                            time: exercise.adjustableTime ? '60' : null
                        };
                    }
                });
            });
            saveWorkoutData();
        }

        function saveWorkoutData() {
            localStorage.setItem('workoutData', JSON.stringify(workoutData));
        }

        function createWorkoutTabs() {
            const tabsContainer = document.getElementById('workoutTabs');
            tabsContainer.innerHTML = '';
            workouts.forEach((workout, index) => {
                const button = document.createElement('button');
                button.className = `workout-tab ${index === currentWorkout ? 'active' : ''}`;
                button.textContent = `${workout.day} - ${workout.name}`;
                button.onclick = () => selectWorkout(index);
                tabsContainer.appendChild(button);
            });
        }

        function selectWorkout(index) {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                activeTimerExercise = null;
            }
            currentWorkout = index;
            currentExercise = 0;
            updateUI();
        }

        function calculateProgress() {
            const workout = workouts[currentWorkout];
            const workoutState = workoutData[currentWorkout] || {};
            let completed = 0;
            let total = 0;

            workout.exercises.forEach((exercise, exerciseIndex) => {
                const sets = workoutState[exerciseIndex]?.sets || exercise.sets;
                total += sets;
                completed += (workoutState[exerciseIndex]?.completed || []).filter(Boolean).length;
            });

            return Math.round((completed / total) * 100) || 0;
        }

        function updateProgress() {
            const progress = calculateProgress();
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressPercent').textContent = `${progress}%`;
        }

        function createExerciseCards() {
            const container = document.getElementById('exerciseList');
            container.innerHTML = '';
            const workout = workouts[currentWorkout];
            workout.exercises.forEach((exercise, exerciseIndex) => {
                const card = document.createElement('div');
                card.className = `exercise-card ${exerciseIndex === currentExercise ? 'active' : ''} ${isInitialRender ? 'initial' : ''}`;
                if (isInitialRender) {
                    card.style.animationDelay = `${exerciseIndex * 0.1}s`;
                }
                card.dataset.exerciseIndex = exerciseIndex;

                const name = document.createElement('h3');
                name.className = 'exercise-name';
                name.textContent = exercise.name;
                card.appendChild(name);

                const configContainer = document.createElement('div');
                configContainer.className = 'config-container';

                const setsLabel = document.createElement('span');
                setsLabel.className = 'config-label';
                setsLabel.textContent = 'Séries:';
                configContainer.appendChild(setsLabel);

                const setsInput = document.createElement('input');
                setsInput.type = 'number';
                setsInput.className = 'sets-input';
                setsInput.min = '1';
                setsInput.value = workoutData[currentWorkout][exerciseIndex]?.sets || exercise.sets;
                setsInput.onchange = (e) => updateSets(exerciseIndex, parseInt(e.target.value));
                configContainer.appendChild(setsInput);

                const repsLabel = document.createElement('span');
                repsLabel.className = 'config-label';
                repsLabel.textContent = 'Reps:';
                configContainer.appendChild(repsLabel);

                const repsInput = document.createElement('input');
                repsInput.type = 'number';
                repsInput.className = 'reps-input';
                repsInput.min = '1';
                repsInput.value = typeof workoutData[currentWorkout][exerciseIndex]?.reps === 'string' ? 
                    workoutData[currentWorkout][exerciseIndex].reps.split(' ')[0] : 
                    workoutData[currentWorkout][exerciseIndex]?.reps || exercise.reps;
                repsInput.onchange = (e) => updateReps(exerciseIndex, parseInt(e.target.value));
                configContainer.appendChild(repsInput);

                card.appendChild(configContainer);

                const setsContainer = document.createElement('div');
                setsContainer.className = 'sets-container';
                card.appendChild(setsContainer);

                if (exercise.adjustableTime) {
                    const timeInput = document.createElement('div');
                    timeInput.className = 'config-container';
                    timeInput.innerHTML = `
                        <span class="config-label">Tempo (s):</span>
                        <input type="number" class="time-input" min="1" value="${workoutData[currentWorkout][exerciseIndex]?.time || exercise.reps.split(' ')[0]}" onchange="updatePlankTime(${exerciseIndex}, this.value)">
                    `;
                    card.appendChild(timeInput);
                }

                if (exerciseIndex === activeTimerExercise && workoutData[currentWorkout][exerciseIndex]?.timer) {
                    const timerElement = createTimer();
                    card.appendChild(timerElement);
                }

                container.appendChild(card);
                updateExerciseCard(exerciseIndex);
            });
            isInitialRender = false;
        }

        function updateSets(exerciseIndex, sets) {
            workoutData[currentWorkout][exerciseIndex].sets = sets;
            workoutData[currentWorkout][exerciseIndex].weights = Array(sets).fill(workoutData[currentWorkout][exerciseIndex].weights[0] || '');
            workoutData[currentWorkout][exerciseIndex].completed = Array(sets).fill(false);
            saveWorkoutData();
            updateExerciseCard(exerciseIndex);
        }

        function updateReps(exerciseIndex, reps) {
            workoutData[currentWorkout][exerciseIndex].reps = reps;
            saveWorkoutData();
            updateExerciseCard(exerciseIndex);
        }

        function updatePlankTime(exerciseIndex, time) {
            workoutData[currentWorkout][exerciseIndex].time = time;
            workoutData[currentWorkout][exerciseIndex].reps = `${time} segundos`;
            saveWorkoutData();
            updateExerciseCard(exerciseIndex);
        }

        function updateExerciseCard(exerciseIndex) {
            const workout = workouts[currentWorkout];
            const exercise = workout.exercises[exerciseIndex];
            const card = document.querySelector(`.exercise-card[data-exercise-index="${exerciseIndex}"]`);
            if (!card) return;

            card.className = `exercise-card ${exerciseIndex === currentExercise ? 'active' : ''}`;

            const setsContainer = card.querySelector('.sets-container');
            setsContainer.innerHTML = '';

            const reps = exercise.adjustableTime ? 
                `${workoutData[currentWorkout][exerciseIndex]?.time || exercise.reps.split(' ')[0]} segundos` : 
                workoutData[currentWorkout][exerciseIndex]?.reps || exercise.reps;

            const sets = workoutData[currentWorkout][exerciseIndex]?.sets || exercise.sets;
            for (let setIndex = 0; setIndex < sets; setIndex++) {
                const setRow = createSetRow(exerciseIndex, setIndex, reps, exercise.rest);
                setsContainer.appendChild(setRow);
            }
        }

        function createSetRow(exerciseIndex, setIndex, reps, rest) {
            const row = document.createElement('div');
            row.className = 'set-row';

            const label = document.createElement('span');
            label.className = 'set-label';
            label.textContent = `Série ${setIndex + 1}`;
            row.appendChild(label);

            const exercise = workouts[currentWorkout].exercises[exerciseIndex];
            if (exercise.weight !== undefined) {
                const input = document.createElement('input');
                input.type = 'number';
                input.className = 'weight-input';
                input.placeholder = 'Peso (kg)';
                input.value = workoutData[currentWorkout][exerciseIndex]?.weights[setIndex] || '';
                input.onchange = (e) => updateWeight(exerciseIndex, setIndex, e.target.value);
                row.appendChild(input);
            }

            const repsInfo = document.createElement('span');
            repsInfo.className = 'reps-info';
            repsInfo.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 12h16"/>
                    <path d="M4 6h16"/>
                    <path d="M4 18h16"/>
                </svg>
                ${reps}
            `;
            row.appendChild(repsInfo);

            const restInfo = document.createElement('span');
            restInfo.className = 'rest-info';
            restInfo.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
                ${rest}s
            `;
            row.appendChild(restInfo);

            const button = document.createElement('button');
            button.className = `complete-button ${workoutData[currentWorkout][exerciseIndex]?.completed[setIndex] ? 'completed' : ''}`;
            button.innerHTML = workoutData[currentWorkout][exerciseIndex]?.completed[setIndex]
                ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>'
                : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>';
            button.onclick = () => completeSet(exerciseIndex, setIndex, rest);
            row.appendChild(button);

            return row;
        }

        function updateWeight(exerciseIndex, setIndex, weight) {
            workoutData[currentWorkout][exerciseIndex].weights[setIndex] = weight;
            saveWorkoutData();
        }

        function completeSet(exerciseIndex, setIndex, rest) {
            const wasCompleted = workoutData[currentWorkout][exerciseIndex].completed[setIndex];
            workoutData[currentWorkout][exerciseIndex].completed[setIndex] = !wasCompleted;

            if (!wasCompleted) {
                if (timerInterval) {
                    clearInterval(timerInterval);
                }
                Object.keys(workoutData[currentWorkout]).forEach((exIdx) => {
                    workoutData[currentWorkout][exIdx].timer = false;
                });
                workoutData[currentWorkout][exerciseIndex].timer = true;
                activeTimerExercise = exerciseIndex;
                currentExercise = exerciseIndex;
                timeLeft = rest;
                isTimerPaused = false;

                saveWorkoutData();
                updateUI();
                startTimer(exerciseIndex);
            } else {
                const hasCompletedSets = workoutData[currentWorkout][exerciseIndex].completed.some(Boolean);
                if (!hasCompletedSets && exerciseIndex === activeTimerExercise) {
                    if (timerInterval) {
                        clearInterval(timerInterval);
                        timerInterval = null;
                    }
                    workoutData[currentWorkout][exerciseIndex].timer = false;
                    activeTimerExercise = null;
                }
                saveWorkoutData();
                updateUI();
            }

            const allSetsCompleted = workoutData[currentWorkout][exerciseIndex].completed.every(Boolean);
            if (allSetsCompleted && exerciseIndex < workouts[currentWorkout].exercises.length - 1) {
                currentExercise = exerciseIndex + 1;
            }
        }

        function createTimer() {
            const timer = document.createElement('div');
            timer.className = 'timer';
            timer.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <span id="timerCount">${timeLeft}s</span>
                <button class="pause-button" id="pauseButton" onclick="togglePauseTimer()">Pausar</button>
            `;
            return timer;
        }

        function startTimer(exerciseIndex) {
            if (timerInterval) {
                clearInterval(timerInterval);
            }

            timerInterval = setInterval(() => {
                if (!isTimerPaused) {
                    timeLeft--;
                    const timerElement = document.querySelector(`.exercise-card[data-exercise-index="${exerciseIndex}"] .timer #timerCount`);
                    if (timerElement) {
                        timerElement.textContent = `${timeLeft}s`;
                    }

                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        timerInterval = null;
                        workoutData[currentWorkout][exerciseIndex].timer = false;
                        activeTimerExercise = null;
                        saveWorkoutData();
                        updateUI();
                    }
                }
            }, 1000);
        }

        function togglePauseTimer() {
            isTimerPaused = !isTimerPaused;
            const pauseButton = document.getElementById('pauseButton');
            if (pauseButton) {
                pauseButton.textContent = isTimerPaused ? 'Retomar' : 'Pausar';
            }
        }

        function resetWorkout() {
            if (confirm('Tem certeza que deseja resetar o progresso? Os pesos, séries e repetições inseridos serão mantidos.')) {
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
                workouts.forEach((workout, workoutIndex) => {
                    workout.exercises.forEach((exercise, exerciseIndex) => {
                        const currentWeight = workoutData[workoutIndex][exerciseIndex]?.weights[0] || exercise.weight || '';
                        const currentSets = workoutData[workoutIndex][exerciseIndex]?.sets || exercise.sets;
                        const currentReps = workoutData[workoutIndex][exerciseIndex]?.reps || exercise.reps;
                        const currentTime = workoutData[workoutIndex][exerciseIndex]?.time || (exercise.adjustableTime ? '60' : null);
                        workoutData[workoutIndex][exerciseIndex] = {
                            sets: currentSets,
                            reps: currentReps,
                            weights: Array(currentSets).fill(currentWeight),
                            completed: Array(currentSets).fill(false),
                            timer: false,
                            time: currentTime
                        };
                    });
                });
                currentExercise = 0;
                timeLeft = 0;
                isTimerPaused = false;
                activeTimerExercise = null;
                isInitialRender = true;
                saveWorkoutData();
                updateUI();
            }
        }

        function updateUI() {
            document.querySelectorAll('.workout-tab').forEach((tab, index) => {
                tab.className = `workout-tab ${index === currentWorkout ? 'active' : ''}`;
            });
            updateProgress();
            createExerciseCards();
        }

        initializeWorkoutData();
        createWorkoutTabs();
        updateUI();
    </script>
</body>
</html>
